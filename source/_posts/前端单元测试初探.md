---
title: 前端单元测试初探
date: 2017-09-11 16:03:26
categories:
tags: WEB
---
## 什么是单元测试(what?)
单元测试又称为 **模块测试**，指针对 **程序模块**(最小可测试部件)进行正确性检测的测试工作。

**程序模块**
分为两类：**过程化编程** 和 **面试对象编程**
对于过程化编程而言：可能是单个程序、函数、过程等
对于面向对象编程而言，最小单元就是 **方法**，包括基类(超类)、抽象类、或者派生类中的方法

对于JavaScript来说，通常也是针对 **函数**、**对象**和 **模块**的测试

## 为什么进行单元测试(why?)
>经验表明一个尽责的单元测试方法将会在软件开发的某个阶段发现很多的Bug，并且修改它们的成本也很低。在软件开发的后期阶段，Bug的发现并修改将会变得更加困难，并要消耗大量的时间和开发费用。无论什么时候作出修改都要进行完整的回归测试，在生命周期中尽早地对软件产品进行测试将使效率和质量得到最好的保证。在提供了经过测试的单元的情况下，系统集成过程将会大大地简化。开发人员可以将精力集中在单元之间的交互作用和全局的功能实现上，而不是陷入充满很多Bug的单元之中不能自拔。——百度百科

 

## 怎样进行单元测试(how?)
- 测试管理工具
  主要用来管理和组织整个测试的工具，它能够将测试框架、断言库、测试浏览器、测试代码和被测试代码组织起来，并运行测试代码，进行测试。
  代表有：[karma 测试框架的前世今生 ](http://taobaofed.org/blog/2016/01/08/karma-origin/)

- 测试框架
  测试框架是单元测试的核心，它提供了单元测试所需的各种API，你可以使用它们来对代码进行单元测试
  Javascript的测试框架很多，具体对比可以参考：[javascript单元测试](http://www.cnblogs.com/frostbelt/archive/2012/08/03/2622302.html)

- 断言库
  用于描述具体测试的API，有了它们，你的测试代码便能简单直接，也更加语义化。
  测试断言库的选择也不少：better-assert、should.js、expect.js、chai.js等等（有关它们的对比，可以参考[几款前端测试断言库(Assertions lib)的选型总结](http://blog.lvscar.info/post/tech/assertions_lib/)

有了上面的三个工具，你就可以开始对你的node代码进行测试了。但是如果想要对前端代码进行测试，还需要另外一个工具:

- 测试浏览器
  前端代码是运行在浏览器中的，要对其进行单元测试，只能将其运行在浏览器上。目前大部分测试工具都支持 **调用**和运行 **本地浏览器** 来进行测试，如果测试仅仅是针对函数或模块的单元测试，则完全可以使用一款无界面的浏览器：**PhantomJs**

另外，还有一个很重要的事情就是测试覆盖率的统计。一般情况下你的测试管理工具会提供相关的覆盖率统计工具，但是有些情况下它们提供的工具未必是你想要的。比如当被测试的代码是经过了某些打包工具打包完了且被压缩和混淆了，同时打包工具还混入了很多自己的代码，这时覆盖率的统计就容易不准确。所以为了避免这种情况，测试覆盖率统计工具需要谨慎选择，至少你得确认它支持你的打包工具已经打包好的代码。

 - 测试覆盖率统计工具
  Karma-Coverage是Karma官方提供的覆盖率统计插件，自然成为项目的首选。





## 参考
- [前端自动化单元测试初探](http://www.jianshu.com/p/6726c0410650)

